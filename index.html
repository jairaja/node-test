<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>FromServer</title>
  </head>
  <body>
    <!-- <button onclick="buttonClicked()">Click me</button> -->
    <div>I am test Site rendered within iFrame of Main site</div>
    <button onclick="buttonClicked()">Post to Auth with cookies</button>
    <script>
      // function onLoad() {
      //   console.log("Test Page is loaded");
      //   console.log(document.cookie);
      //   location.replace("http://gbmlvvcsw5451.rbsres01.net:8080/Parent.html");
      // }

      function buttonClicked() {
        console.log("Post request from Main to Auth");
        console.log(document.cookie);
        const onButtonCLick = async () => {
          const response = await fetch(
            "https://node-auth-kvjp.onrender.com/post",
            {
              mode: "no-cors",
              method: "POST",
              headers: {
                "Content-Type": "application/json",
                // "Access-Control-Allow-Origin": "*",
                Accept: "application/json",
              },
              body: JSON.stringify({ test: "testData" }),
              credentials: "include",
            }
          );
          const result = await response?.text();
          console.log("Success:", result);
        };
        onButtonCLick();
      }
    </script>
  </body>
</html>
